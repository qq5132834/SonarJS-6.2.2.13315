<p>操作系统命令是安全敏感的。 例如，它们的使用在过去导致了以下漏洞：</p>
<ul>
  <li> <a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-12465">CVE-2018-12465</a> </li>
  <li> <a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-7187">CVE-2018-7187</a> </li>
</ul>
<p>
  执行操作系统命令或执行与底层系统交互的命令的应用程序应该中和用于构造这些命令的任何外部提供的输入。
  如果不这样做，攻击者可能会执行意外或危险的命令，从而可能导致机密性、完整性或可用性丧失。
</p>
<p> </p>
<p>减少命令可以造成的伤害：</p>
<ul>
  <li>
    在沙盒环境中执行代码，在操作系统和进程之间强制执行严格的界限。
  </li>
  <li>
    如果进程有太多特权，则拒绝运行该命令。 例如：禁止以“root”身份运行代码。
  </li>
</ul>
<p> </p>
<h2>敏感示例</h2>
<pre>
const cp = require('child_process');

// 以下方法调用是敏感的。 验证参数字符串。
cp.exec(str);
cp.execSync(str);

// 如果 shell 参数设置为 true，则以下方法调用是敏感的。
cp.spawn(str, { shell: true });
cp.spawnSync(str, { shell: true });
cp.execFile(str, { shell: true });
cp.execFileSync(str, { shell: true });
</pre>
<h2>例外</h2>
<p>如果传递的字符串是完全硬编码的，则不会出现任何问题。</p>
<h2>参考</h2>
<ul>
  <li> <a href="https://www.owasp.org/index.php/Top_10-2017_A1-Injection">OWASP Top 10 2017 Category A1</a> - 注入 </li>
</ul>

